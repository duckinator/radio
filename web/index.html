<!doctype html>
<meta charset="utf-8">
<title>do1g</title>
<style>
* { background: #fafaff; }
main {
    font-family: helvetica, sans-serif;
    font-size: 1.5rem;
    max-width: 60ch;
    margin: 0 auto;
}
h2 { font-size: 2rem; }
ul, h2 {
    text-align: center;
}
ul {
    list-style: none;
    margin: 0;
    padding: 0;
}
a, a:visited { color: #166491; }
a:active, a:focus, a:hover{ color: #2197db; }
</style>
<main>
<h1>radio.do1g.com</h1>

<p>TODO: Actually put effort into this page.</p>

    <div id="info"></div>

<audio controls="controls" preload="none">
    <source src="/stream" type="application/ogg"></source>
</audio>

<script>
var info = document.getElementById('info');

function _update(data) {
    var source = data['icestats']['source'];
    var artist = source['artist'];
    var title = source['title'];
    
    info.innerHTML = title + ' by ' + artist;
    
    setTimeout(update, 2000);
}

function update() {
    fetch('/status-json.xsl')
        .then(response => response.json())
        .then(data => _update(data));
}

update();
</script>

</main>
