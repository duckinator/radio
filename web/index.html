<!doctype html>
<meta charset="utf-8">
<title>do1g</title>
<style>
* { background: #fafaff; }
main {
    font-family: helvetica, sans-serif;
    font-size: 1.5rem;
    max-width: 60ch;
    margin: 0 auto;
}
h2 { font-size: 2rem; }
a, a:visited { color: #166491; }
a:active, a:focus, a:hover{ color: #2197db; }
</style>
<main>
<h1>radio.do1g.com</h1>

<p>Now playing: <span id="info"></span></p>

<div>
    <audio id="player" controls="controls" preload="none">
        <source src="/stream" type="application/ogg"></source>
    </audio>
</div>

<p></p>
<p>Direct stream url: <a href="/stream">https://radio.do1g.com/stream</a></p>

<h2>Artists</h2>

<p>These are all of the artists included in the radio.do1g.com rotation. If you want to be included here, <a href="mailto:me@duckie.co">send me an email (me@duckie.co)</a>!</p>

<ul>
    <li><a href="https://duckinator.bandcamp.com">Ellen Marie Dash (bandcamp)</a></li>
</ul>

<script>
var info = document.getElementById('info');

function _update(data) {
    var source = data['icestats']['source'];
    var artist = source['artist'];
    var title = source['title'];
    
    info.innerHTML = '<em>' + title + '</em> by <em>' + artist + '</em>';
    
    setTimeout(update, 2000);
}

function update() {
    fetch('/status-json.xsl')
        .then(response => response.json())
        .then(data => _update(data));
}

update();
</script>

</main>
